function loadVariables() {
    winHeight = $(window).height(), winWidth = $(window).width(), 600 > winWidth ? (isMobile = !0, $("#intro-video").length && $("#intro-video").remove()) : isMobile = !1, winWidth > 600 && 1024 > winWidth ? (isTablet = !0, $("#intro-video").length && $("#intro-video").remove()) : isTablet = !1, setCustomHeight(), checkVisitor(), $("#index-container").length && !isMobile ? $("#index-container").height(winHeight).css("overflow", "hidden") : $("#index-container").css("height", "auto").css("overflow", "auto")
}

function checkVisitor() {
    $(".characters-wrapper").remove(), loadHomeIntro(), document.cookie.indexOf("visited") >= 0 ? $(".characters-wrapper").length && ($(".characters-wrapper").remove(), setTimeout(function () {
        loadHomeIntro()
    }, 2e3)) : document.cookie = "visited"
}

function setCustomHeight() {
    var a;
    $(".custom-height").each(function () {
        a = $(this).attr("data-height-factor"), $(this).css("height", winHeight * a + "px")
    })
}

function historyAPI() {
    jQuery("body").on("click", ".historyAPI", function (a) {
        a.preventDefault();
        var b = $(this).attr("href");
        $(".page-transition").addClass("animate"), setTimeout(function () {
            $(".page-transition").addClass("animate-mid"), $("#history-container").addClass("animate")
        }, 750), getContent(b, !0), jQuery(".historyAPI").removeClass("active"), $(this).addClass("active")
    })
}

function getContent(a, b) {
    $.ajax({
        url: a,
        type: "GET",
        success: function (c) {
            1 == b && history.pushState(null, null, a);
            var d = window.location.pathname;
            d = d.split("/").pop(), d = d.replace(".php", ""), $("#history-container").load(a + " #" + d + "-container"), setTimeout(function () {
                $(".page-transition").addClass("animate-complete"), $("html, body").animate({
                    scrollTop: 0
                }, 100)
            }, 700);
            var e;
            setTimeout(function () {
                $("#" + d + "-container .script-tag").each(function () {
                    e = $(this).html(), $.getScript($(this).html()).done(function (a, b) {
                        e = $(this).html()
                    })
                })
            }, 900), $.get(a, function (a) {
                var b = a.match(/<title>([^<]*)/);
                if (b.length > 0) {
                    var c = b[1];
                    document.title = c
                }
            }), setTimeout(function () {
                $(".transition-animate, .page-transition, #history-container").removeClass("animate animate-mid animate-complete")
            }, 1200), setTimeout(function () {
                setCustomHeight(), $(".swipe-element").length && !isMobile && initSwipeWrapper(), $("#index-container").length && ($(".main-body").addClass("show"), $(".hide-header").removeClass("hide-header"), $("#intro-video").length && ($("#intro-video").get(0).play(), document.getElementById("intro-video").currentTime = 4), enableNav = !0), workVideoInit()
            }, 1050)
        }
    }), $.get(a).done(function (a) {})
}

function showModal(a) {
    $(a).fadeIn().addClass("show-modal"), $(".bg-overlay").fadeIn(), $("body").on("click", ".bg-overlay", function () {
        $(".bg-overlay, .modal").fadeOut().removeClass("show-modal")
    })
}

function manabaModal(a) {
    $(a).fadeIn(), setTimeout(function () {
        $(a).fadeOut(), showIntroVideo()
    }, 5e3)
}

function happySite() {
    showIntroVideo(), $(".new-manaba-wrapper .manaba-quote-wrapper, .new-manaba-wrapper .manaba-block").toggleClass("show-manaba show")
}

function closeModal() {
    $(".bg-overlay, .modal").fadeOut().removeClass("show-modal")
}

function toggleAccordion(a) {
    $(a).toggleClass("closed")
}

function loadingAnimation() {
    setTimeout(function () {
        $(".transition-animate").addClass("animate").delay(500).queue(function () {
            $(this).removeClass("animate").dequeue()
        })
    }, 3200)
}

function showIntroVideo() {
    $(".characters-caption-block").addClass("hide"), $(".character-image-wrapper, .characters-caption-block").fadeOut(800).delay(0).queue(function () {
        $(".characters-list").addClass("animate").dequeue()
    }), setTimeout(function () {
        loadHomeIntro()
    }, 1100)
}

function loadHomeIntro() {
    $(".characters-wrapper").fadeOut(), $(".main-body").addClass("show"), $(".hide-header").removeClass("hide-header"), $("#intro-video").length && ($("#intro-video").get(0).play(), document.getElementById("intro-video").currentTime = 4), enableNav = !0
}

function toggleHeader() {
    $("header").hasClass("show-header") ? ($(".header-list-items-wrapper, .header-complete, .footer-bottom").toggleClass("show-header"), setTimeout(function () {
        $(".header-logo img, .line-menu, header").toggleClass("show-header")
    }, 550)) : ($("header, .header-complete, .header-logo img, .line-menu").toggleClass("show-header"), setTimeout(function () {
        $(".header-list-items-wrapper, .footer-bottom").toggleClass("show-header")
    }, 550))
}

function initSwipeWrapper() {
    var a = 1;
    $(".swipe-element").each(function () {
        $(this).addClass("swipe-index-" + a).css("z-index", 10 - a), a++, currSwipeLimit = a
    }), $(document).keydown(function (a) {
        (40 == a.keyCode || 39 == a.keyCode) && swipeDown(currSwipeEle), (38 == a.keyCode || 37 == a.keyCode) && swipeUp(currSwipeEle)
    });
    var b;
    $("body").bind("DOMMouseScroll", function (a) {
        return $("#index-container").length ? (b = Math.abs(a.originalEvent.detail), b > 50 && 0 == pageScrolling && (a.originalEvent.wheelDelta < 0 ? swipeDown(currSwipeEle) : swipeUp(currSwipeEle), pageScrolling = !0, setTimeout(function () {
            pageScrolling = !1
        }, 1e3)), !1) : void 0
    }), $("body").bind("mousewheel", function (a) {
        return $("#index-container").length ? (b = Math.abs(a.originalEvent.wheelDelta), b > 50 && 0 == pageScrolling && (a.originalEvent.wheelDelta < 0 ? swipeDown(currSwipeEle) : swipeUp(currSwipeEle), pageScrolling = !0, setTimeout(function () {
            pageScrolling = !1
        }, 1e3)), !1) : void 0
    }), initWorkNav(), isMobile || initSwipe()
}

function swipeDown(a) {
    enableNav && (currSwipeLimit - 1 > a && ($(".swipe-element").removeClass("curr-element"), $(".swipe-element.swipe-index-" + a).addClass("prev-element").removeClass("curr-element last-element"), a++, $(".swipe-element.swipe-index-" + a).addClass("curr-element").removeClass("last-element"), currSwipeEle = a, a == currSwipeLimit - 1 && $(".swipe-element.swipe-index-" + (a - 1)).addClass("last-element")), checkHeaderColor(), workNavChange())
}

function pad(a) {
    return 10 > a ? "0" + a : a
}

function swipeUp(a) {
    a > 1 && ($(".swipe-element.swipe-index-" + a).removeClass("curr-element prev-element last-element"), a--, $(".swipe-element.swipe-index-" + a).removeClass("prev-element last-element").addClass("curr-element"), currSwipeEle = a), checkHeaderColor(), workNavChange()
}

function hammerSwipeUp() {
    swipeUp(currSwipeEle)
}

function hammerSwipeDown() {
    swipeDown(currSwipeEle)
}

function initTouchListeners(a, b) {
    var c = new Hammer(a, b);
    c.get("swipe").set({
        direction: Hammer.DIRECTION_VERTICAL
    }), c.on("dragup swipeup", hammerSwipeDown).on("dragdown swipedown", hammerSwipeUp)
}

function initSwipe() {
    for (var a = $(".swipe-element"), b = 0; b < a.length; b += 1) initTouchListeners(a[b])
}

function checkHeaderColor() {
    setTimeout(function () {
        1 == currSwipeEle ? ($("header").removeClass("alt-header"), $(".manaba-block").removeClass("show")) : ($("header").addClass("alt-header"), $(".manaba-block").addClass("show"))
    }, 400)
}

function workNavChange() {
    var a;
    $(".curr-element").hasClass("work-item") && (a = $(".curr-element").attr("data-work-index"), $(".work-nav-item").removeClass("selected"), $(".work-nav-item:nth-child(" + a + ")").addClass("selected"), $(".work-nav-number").html(pad(a)))
}

function initWorkNav() {
    var a = "",
        b = 1;
    currSwipeEle = 1, $(".work-item").each(function () {
        a += '<li class="work-nav-item"><span></span><label>' + $(this).attr("data-project-name") + "</label></li>", $(this).attr("data-work-index", b), b++
    }), $(".work-nav-list").html(a), $(".work-nav-item:first-child").addClass("selected");
    var c, b, d;
    $(".work-nav-item").click(function () {
        if (c = $(".work-nav-item.selected").index() + 1, b = $(this).index() + 1, d = c - b, d > 0)
            for (var a = 0; d > a; a++) swipeUp(c - a + 1);
        else
            for (var a = 0; a < Math.abs(d); a++) swipeDown(c + a + 1)
    })
}

function menuHover() {
    var a;
    $("body").on("mouseenter", ".header-item", function () {
        a = $(this).index() + 1, $(".header-item-caption").removeClass("show"), $(".header-item-caption:nth-child(" + a + ")").addClass("show")
    }), $("body").on("mouseleave", ".header-item", function () {
        $(".header-item-caption").removeClass("show")
    })
}

function showManaba() {
    randomQuote(), $(".manaba-main, .manaba-block-main").toggleClass("show-manaba")
}

function showManabaNew() {
    randomQuoteNew(), $(".new-manaba-wrapper .manaba-quote-wrapper, .new-manaba-wrapper .manaba-block").toggleClass("show-manaba show")
}

function randomQuote() {
    tempNo = Math.floor(Math.random() * quotes.length), randomCheck = randomCheck != tempNo ? tempNo : Math.floor(Math.random() * quotes.length), $(".manaba-quote-block h3").html(quotes[randomCheck]), tempNo = Math.floor(Math.random() * quoteColors.length), randomCheck = randomCheck != tempNo ? tempNo : Math.floor(Math.random() * quoteColors.length), $(".manaba-quote-wrapper").css("background-color", "rgba(" + quoteColors[randomCheck] + ")")
}

function randomQuoteNew() {
    tempNo = Math.floor(Math.random() * quotesNew.length), randomCheck = randomCheck != tempNo ? tempNo : Math.floor(Math.random() * quotesNew.length), $(".new-manaba-wrapper .manaba-quote-block h3").html(quotesNew[randomCheck]), tempNo = Math.floor(Math.random() * quoteColors.length), randomCheck = randomCheck != tempNo ? tempNo : Math.floor(Math.random() * quoteColors.length), $(".new-manaba-wrapper .manaba-quote-wrapper").css("background-color", "rgba(" + quoteColors[randomCheck] + ")")
}

function workVideoInit() {
    if ($(".work-hero").length) {
        $(".work-hero").height(.95 * winHeight), $(".work-list-wrapper").css("margin-top", .95 * winHeight + "px"), $(window).scroll(function () {
            var a = $(window).scrollTop() / 500;
            a > 1 && (a = 1), a = a.toString();
            var b = a.split("."),
                c = 1 - parseFloat("." + b[1]);
            $(".work-page-caption h1, .work-page-caption p").animate({
                opacity: c
            }, 0)
        });
        var a;
        $("body").on("mouseover", ".work-clients-item", function () {
            a = $(this).find(".work-title").html(), $(".main-work-title .work-title").html(a), $(".main-work-title").addClass("extend")
        }).on("mouseout", ".work-clients-item", function () {
            $(".main-work-title .work-title").html(""), $(".main-work-title").removeClass("extend")
        })
    }
}

function careersItemShow() {
    var a;
    $(document).on("click", ".careers-title", function (b) {
        a = $(this), a.closest(".careers-item").hasClass("show") ? a.closest(".careers-item").removeClass("show") : ($(".careers-item").removeClass("show"), a.closest(".careers-item").addClass("show"))
    }), $(".careers-btn").click(function () {
        $("html, body").animate({
            scrollTop: .8 * $(window).height()
        }, 1500)
    })
}

function downloadFiles() {

}
var winHeight, winWidth, scrollTop, isMobile = !1,
    isTablet = !1,
    enableNav = !1;
$(document).ready(function () {
    downloadFiles(), careersItemShow(), loadVariables(), historyAPI(), loadingAnimation(), menuHover(), setCustomHeight(), workVideoInit(), isMobile || initSwipeWrapper()
}), $(window).resize(function () {
    loadVariables(), isMobile ? (initSwipeWrapper(), setCustomHeight()) : (initSwipeWrapper(), setCustomHeight())
}), $(window).load(function () {
    setCustomHeight()
}), window.addEventListener("popstate", function (a) {});
var historyPageContent, currSwipeEle = 1,
    currSwipeLimit, lastScrollTop = 0,
    pageScrolling = !1,
    swipeFlag = !1,
    webDevBreak = {},
    swipeOptions = {
        preventDefault: !0
    };
webDevBreak.prepareForTouchesWhenReady = function () {
    document.addEventListener("DOMContentLoaded", webDevBreak.prepareForTouches)
}, webDevBreak.prepareForTouchesWhenReady();
var quoteColors = ["239, 72, 54,.95", "102, 51, 153,.95", "65, 131, 215,.95", "38, 166, 91,.95", "247, 202, 24,.95", "248, 148, 6,.95", "108, 122, 137, .95"],
    quotes = ["I happy to see you.", "Our design eccentrics... they are DIFFERENTLY WIRED", "With expertise in Multiple Digital Transformations, we will provide you the best service and consulting throughout your journey", 'Our awesome CTO services lets you focus on building an awesome business..', "Good, Now we hunt - as a pack", "We build.. you deliver", 'Awesome Data Analytics .. Now in your back pocket', "Your Trusted technology partner."],
    quotesNew = ["I happy to see you.", "Our design eccentrics... they are DIFFERENTLY WIRED", "With expertise in Multiple Digital Transformations, we will provide you the best service and consulting throughout your journey", "Our awesome CTO services lets you focus on building an awesome business..", "Good, Now we hunt - as a pack", "We build.. you deliver", "Awesome Data Analytics .. Now in your back pocket", "Your Trusted technology partner", "To get ahead. You got to start. Now!", "Begin where you are. Use tools you got. Do what you can.", "If dinosaur come. You no try to pet it. Run!"],
    randomCheck = -1,
    tempNo;
! function (a, b, c, d, e, f, g) {
    a.GoogleAnalyticsObject = e, a[e] = a[e] || function () {
        (a[e].q = a[e].q || []).push(arguments)
    }, a[e].l = 1 * new Date, f = b.createElement(c), g = b.getElementsByTagName(c)[0], f.async = 1, f.src = d, g.parentNode.insertBefore(f, g)
}(window, document, "script", "https://www.google-analytics.com/analytics.js", "ga"), ga("create", "UA-69529221-4", "auto"), ga("send", "pageview");

var downloadUrl;

function showCareersModal(designation, assignmentLink) {
    $('.careers-modal, .bg-overlay').fadeIn();
    $('#job-position').val(designation);
    downloadUrl = assignmentLink;

    $('.bg-overlay').click(function () {
        $('.bg-overlay, .careers-modal').fadeOut();
    });
}

// get all data in form and return object
function getFormData() {
    var elements = document.getElementById("gform").elements; // all form elements
    var fields = Object.keys(elements).map(function (k) {
        if (elements[k].name !== undefined) {
            return elements[k].name;
            // special case for Edge's html collection
        } else if (elements[k].length > 0) {
            return elements[k].item(0).name;
        }
    }).filter(function (item, pos, self) {
        return self.indexOf(item) == pos && item;
    });
    var data = {};
    fields.forEach(function (k) {
        data[k] = elements[k].value;
        if (elements[k].type === "checkbox") {
            data[k] = elements[k].checked;
            // special case for Edge's html collection
        } else if (elements[k].length) {
            for (var i = 0; i < elements[k].length; i++) {
                if (elements[k].item(i).checked) {
                    data[k] = elements[k].item(i).value;
                }
            }
        }
    });
    console.log(data);
    return data;
}
var hasDownloaded = false;

function handleFormSubmit(event) { // handles form submit withtout any jquery
    event.preventDefault(); // we are submitting via xhr below
    var data = getFormData(); // get the values submitted in the form
    var ele, hasError = false;
    hasDownloaded = false;
    $('.careers-modal button .fa').addClass('show');
    $('.input-wrapper input').removeClass('form-error');
    $('.error-overall').removeClass('show');
    $('.input-wrapper input').each(function () {
        ele = $(this);
        if (ele.val().length === 0) {
            ele.addClass('form-error');
            hasError = true;
            $('.error-overall').addClass('show');
            $('.careers-modal button .fa').removeClass('show');
        }
    })
    if (!hasError) {
        var url = event.target.action; //
        var xhr = new XMLHttpRequest();
        xhr.open('POST', url);
        // xhr.withCredentials = true;
        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        xhr.onreadystatechange = function () {
            console.log(xhr.status, xhr.statusText)
            console.log(xhr.responseText);
            document.getElementById('gform').style.display = 'none'; // hide form
            $('.careers-modal h3').html('Thanks! We look forward to your application.');
            $('.careers-modal button .fa').removeClass('show');
            if (navigator.appVersion.indexOf("Mac") != -1) {
                downloadUrl = downloadUrl.replace('.docx', '.pages');
            };
            if (hasDownloaded == false) {
                window.location.href = 'http://madaboutdigital.co.in/' + downloadUrl;
                hasDownloaded = true;
            }
            setTimeout(function () {
                $('.bg-overlay, .careers-modal').fadeOut();
            }, 3000);
            return;
        };
        // url encode form data for sending as post data
        var encoded = Object.keys(data).map(function (k) {
            return encodeURIComponent(k) + '=' + encodeURIComponent(data[k])
        }).join('&')
        xhr.send(encoded);
    }
}

function loaded() {
    console.log('contact form submission handler loaded successfully');
    // bind to the submit event of our form
    var form = document.getElementById('gform');
    if ($('#gform').length)
        form.addEventListener("submit", handleFormSubmit, false);
};
document.addEventListener('DOMContentLoaded', loaded, false);